apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    {{- include "labels.common" . | nindent 4 }}  
  name: grafana-dashboards-public-shared
  namespace: {{ .Values.namespace  }}
data:
  home.json: {{ (tpl (.Files.Get "dashboards/home.json") . ) | quote }}
{{ (.Files.Glob "dashboards/shared/*").AsConfig | indent 2 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    {{- include "labels.common" . | nindent 4 }}  
  name: grafana-dashboards-public-mixin
  namespace: {{ .Values.namespace  }}
data:
{{ (.Files.Glob "dashboards/mixin/*").AsConfig | indent 2 }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    {{- include "labels.common" . | nindent 4 }}  
  name: grafana-dashboards-public-{{ .Values.provider.kind }}
  namespace: {{ .Values.namespace  }}
data:
{{- $pattern := "dashboards/{{ .Values.provider.kind }}/*" }}
{{ (.Files.Glob $pattern).AsConfig | indent 2 }}
